.row
  .col-sm-12
    %ul.breadcrumbs
      %li= link_to "Home", root_url
      %li= link_to "Visualizations", viz_vizs_path
    %h2.headline= @viz_viz.title
- if @viz_viz.chart != "Compare Line Chart"  
  .row
    .col-sm-4
      %h5 Transformed output
      - if @mapped_output.present?
        %table.bordered
          - @mapped_output.each do |key, set|          
            %tr
              %td= set
              %td= key              
    .col-sm-8
      #pie-chart{style: "height:500px; width:500px;"}

-else
  = render partial: "cms_articles/line-chart"
        
- chart_types = { "Pie Chart" => "pie", "Election Donut Chart" => "election-donut" , "Donut Chart" => "donut", "Bar Chart" => "bar", "Column Chart" => "column", "Grouped Column Chart" => "grouped-column", "Line Chart" => "line", "Compare Line Chart" => "custom-line" }

:javascript  
  var custom_chart = ["Bubble Chart", "Compare Line Chart"];
  if (custom_chart.indexOf(gon.chart_type) >= 0) {
    GenerateCustomChart(gon.chart_type,"#pie-chart", gon.csv_data);
  }else {
    // display Echart if datawrapper
    dw.visualize({
        type: '#{chart_types[@viz_viz.chart]}-chart', 
        theme: 'default', 
        container: $('#pie-chart'),
        datasource:   dw.datasource.delimited({csv: gon.csv_data})
    });
  }



          