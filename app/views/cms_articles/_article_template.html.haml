:css
  .filter-data-chart{
    cursor: pointer;
    font-size: 0.8em;
    margin-left: 5px;
    font-style: italic;
  }
  .selected{
    text-decoration: underline;
    font-weight: bold
  }
-if !@cms_article.description.nil?
  .row
    .col-sm-12
      =@cms_article.description.html_safe
-if !@provider.text_at_top.nil? 
  .row
    .col-sm-12
      %strong
        %p=@provider.text_at_top
.row
  .col-sm-12
    %h3= @template["collection_in_europeana_title"]
    %h2{id: "collection-in-europeana-api",:"provider-id" => "#{@cms_article.title}"}
    %p=@template["collection_in_europeana_description"]
.row
  .col-sm-12
    .col-sm-6
      %h4= @template["media_types_title"]
      %br
      = @template["media_types_description"]
      %div{class: "pykih-viz column-chart",:"data-slug-id" => "#{@selected_article}-media-type",id: "#{@selected_article}-media-type"}
      =link_to "Download CSV", "/articles/#{@selected_article}-media-type/csv", class: 'pull-left' 

    .col-sm-6
      %h4= @template["reusable_title"]
      =@template["reusable_description"]
      %div{class: "pykih-viz pie-chart",:"data-slug-id" => "#{@selected_article}-reusable",id: "#{@selected_article}-reusable"}
      =link_to "Download CSV", "/articles/#{@selected_article}-reusable/csv", class: 'pull-right' 
%br
%br  
.row
  .col-sm-12
    %h2= @template["views_on_europeana_title"]
    =@template["views_on_europeana_description"]
  %br
.row
  .col-sm-12
    %h4= @template["views_and_clickthroughs_title"]
    =@template["views_and_clickthroughs_description"]
    .br
    .br
    -@all_years.each do |year|
      %span
        -if @all_years.index(year) != @all_years.length-1 
          %a.filter-data-chart{target: "blank",id: "#{year}"}=year
        -else 
          %a.filter-data-chart.selected{target: "blank",id: "#{year}"}=year
    #page_view_click_chart{chart: "custom-column-group-chart", :"data-slug-id" => "#{@selected_article}-traffic", style: "width: 100%; height: 400px;"}
    =link_to "Download CSV", "/articles/#{@selected_article}-traffic/csv", class: 'pull-right'
    / %img{src: "images/views_and_clickthroughs.png"}
    %br
.row
  .col-sm-12
    %h4= @template["top_25_countries_title"]
    =@template["top_25_countries_description"]
    #top-25-countries-map{chart: "custom-maps-chart", :"data-slug-id" => "#{@selected_article}-top-25-countries", style: "width: 100%; height: 400px;"}    
    /%img{src: "images/top_25_countries.png"}
.row
  .col-sm-12
    %h4= @template["top_10_digital_objects_title"]
    =@template["top_10_digital_objects_description"]
    %br
    %img{src: "images/top_10_digital_objects.png"}
-if !@provider.text_at_bottom.nil?
  .row
    .col-sm-12
      %strong
        %p= @provider.text_at_bottom


// Click filter to change chart as per year
// add class name filter-data-chart
/ $.get("/generate/chart/" + slug_id +"?gcolchart=2014", function(vdata, status) {
/   addCustomColumnGroupChart("#page_view_click_chart", vdata);      
/ });  

:javascript
  $(document).ready(function(){
    $(".filter-data-chart").click(function(){
      $("#page_view_click_chart").html("");
      $(".filter-data-chart").removeClass("selected")
      $(this).addClass("selected")
      $.get("/generate/chart/#{@selected_article}-traffic?gcolchart="+this.id, function(vdata, status) {
        addCustomColumnGroupChart("#page_view_click_chart", vdata);      
     });
    })
  }) 